<div  [class.fixed]="isHeaderFixed" class="top-0 shadow-lg left-0 right-0 w-full z-50 bg-white">
    <div class="flex items-center container">
        <div class="relative h-16 w-[100%] flex items-center justify-between ">
            <div class="flex gap-4 items-center">
                <button (click)="openNavbar()"  class="sm:hidden   flex">
                    <i class="text-3xl font-bold ri-menu-2-line"></i>
                </button>
                <a routerLink="/">
                    <p class="font-bold text-2xl">Store</p>
                </a>

                <nav class="mx-6 hidden sm:block">
                    <ul class="flex justify-center items-center space-x-4 lg:space-x-6">
                        <li *ngFor="let route of routes">
                            <a class="text-sm font-medium transition-colors hover:text-black"
                                [class]="{
                                'text-black': route.active == true,
                                'text-neutral-500': route.active == false
                                }"
                                [routerLink]="route.href">
                                {{ route.label }}
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="flex items-center gap-x-3">
                <a class="relative cursor-pointer " routerLink="/developer">
                    <i class="fa-solid text-[25px] text-green-700 fa-code"></i>
                    <span class="fly-item-dev bg-green-700">13</span>
                </a>
                <a class="relative cursor-pointer " routerLink="/Favs">
                    <i class="text-[25px] font-semibold text-pink-600 ri-heart-line"></i>
                    <span class="fly-item bg-pink-600">{{getFavoriteItemCount()}}</span>
                </a>
                <a class="relative cursor-pointer" routerLink="/checkout"> 
                    <i class="text-[25px] font-semibold text-blue-600  ri-shopping-cart-line"></i>
                    <span class="fly-item bg-blue-600">{{getCartItemCount()}}</span>
                </a>
                <a class="flex  flex-col" >
                    <p class="text-xs text-gray-500 ">Total</p>
                    <span class="font-bold text-lg  mt-[-4px]">${{calculateCartTotal()}}</span>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- responsive mobile  -->
<div class="shadows flex sm:hidden " [ngClass]="{'active':isOpen}">
    
    <div [ngClass]="{'active':isOpen}" class="responsive-nav  sidebar transition  
     top-0 left-[-300px] fixed h-[100vh] w-[300px] overflow-hidden  z-10 bg-white overflow-y-auto">
        <div class=" w-[100%] flex items-start flex-col justify-between ">
            
            <div class="w-full responsive-nav-border-radius flex text-[#fff] p-[1.5em] pb-[3em] bg-[#453c5c] justify-between items-center bg-">
                <a routerLink="/">
                    <p class="font-bold text-3xl">Store</p>
                </a>
                <button (click)="closeNavbar()" class="sm:hidden close-btn flex
                    ">
                    <i class="text-3xl font-bold fa-solid  fa-xmark"></i>
            </button>
            </div>
    
            <div class="w-full p-3 mt-3">
                <div>
                    <h1 class="text-2xl p-4 bg-[#f2f3f5] mb-4 text-center rounded">All department</h1>
                    <ul>
                      <li class=" relative" *ngFor="let maincategory of categoriesWithSubcategories">
                        <a
                          href="#"
                          class="font-medium h-[46px] flex items-center gap-1  text-xl "
                          (click)="toggleSubcategories(maincategory.mainCategory)"
                        >
                            <i class="ri-bear-smile-line"></i>
                            <span class="text-gray-500 text-xl font-medium ">{{ maincategory.mainCategory }}</span>
                            <div class="ml-auto">
                                <i
                                class="ri-arrow-right-s-line"
                                *ngIf="maincategory.subcategories"
                                ></i>
                            </div>
                        </a>
                            <ul
                                *ngIf="maincategory.subcategories"
                                [hidden]="maincategory.showSubcategories"
                                class="z-99"
                            >
                            <li class="py-1" *ngFor="let subCategory of maincategory.subcategories">
                                <a  class="text-xl font-normal leading-[20px]  pl-[1.3em]" href="#">{{ subCategory }}</a>
                            </li>
                        </ul>
                      </li>
                    </ul>
                  </div>

                <nav class="w-full">
                    <ul class="flex justify-center flex-col items-start">
                        <li (click)="closeNavbar()" *ngFor="let route of routes" class="w-full p-3 rounded-sm text-black hover:bg-[#f6f6f6] ">
                            <a class="text-md font-medium text-black transition-colors"
                                [routerLink]="route.href">
                                {{ route.label }}
                            </a>
                        </li>
                    </ul>
                </nav>  
                
              
                  
            </div>
    
        </div>
    </div>



</div>


<div class="bg-[#453c5c] py-5">
    <div class="container">
        <div class="flex justify-between items-center">
            <div class="left md:block hidden">
                <div class="relative z-10 ">
                    <div (click)="togglecats()" class="relative w-[300px] mb-[-1.2em] px-3 text-[#fff] py-6 bg-[#ff6b6b] rounded-t-lg">
                        <div class="">All Department</div>
                        <div class="text-xs text-[#f2f3f5]">Total 1059 products</div>
             
                        <div  class="absolute right-0 h-[60px] w-[60px] top-0 p-[1.3em]">
                            <div *ngIf="isopencats; then thenBlock else elseBlock"></div>
                            <ng-template #elseBlock><i class="text-3xl fa-solid fa-xmark"></i></ng-template>
                            <ng-template #thenBlock><i class="text-3xl  ri-menu-3-line "></i></ng-template>   
                        </div>
                    </div>
                    <div [ngClass]="{'h-[0px] invisible': isopencats}"  class="departments z-50 absolute top-[100%]   w-[300px] bg-[#fff] border">
                        <ul>
                          <li class="border-t relative" *ngFor="let maincategory of categoriesWithSubcategories">
                            <a
                              href="#"
                              class="category font-medium h-[46px] flex items-center gap-3 text-xl px-[1.5em]"
                              (click)="toggleSubcategories(maincategory.mainCategory)"
                            >
                              <i class="ri-bear-smile-line"></i>
                              <span class="text-gray-500">{{ maincategory.mainCategory }}</span>
                              <div class="ml-auto">
                                <i
                                  class="ri-arrow-right-s-line"
                                  *ngIf="maincategory.subcategories"
                                ></i>
                                
                              </div>
                              <ul
                              class="subcategories absolute border-t
                               border-t-[#e5e8ec]  h-[100%] left-[105%] w-[200px] top-0 transition-all duration-300 ease-in-out"
                              *ngIf="maincategory.subcategories"
                              [hidden]="maincategory.showSubcategories"
                            >
                              <li class="bg-white border-r border-r-[#e5e8ec] 
                                border-b border-b-[#e5e8ec] border-l border-l-[#e5e8ec] 
                                flex items-center hover:pl-10 transition h-[46px]  text-xl px-3" 
                                *ngFor="let subCategory of maincategory.subcategories">
                                <a href="#">{{ subCategory }}</a>
                              </li>
                            </ul>
                            </a>
                            
                            
                          </li>
                        </ul>
                      </div>
                      
                </div>
            </div>
            <div class="right flex-1 w-full  md:max-w-[400px] lg:max-w-[600px]">
                <div class="relative overflow-hidde">
                    <span class=" absolute  
                          top-[5px] text-[#ff6b6b] left-3 text-[20px]   h-full"><i class="ri-search-line"></i></span>
                    <input class="border-0 text-2xl overflow-hidden rounded-[10px] text-[0.9em] font-light w-full outline-none pr-[7em] pl-[3em] leading-[3.25em]" type="text" placeholder="Search for products">
                    <button  class="rounded-r-lg  absolute
                     top-0 px-[1.5em] py-[0.55em] bg-[#ff6b6b] 
                      text-[#f2f3f5] h-full right-0 border-0
                       outline-none text-[1em] font-semibold">Search</button>
                </div>
            </div>
        </div>
    </div>
</div>



